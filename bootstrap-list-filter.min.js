/* 
 * bootstrap-list-filter v0.3.3 - 2019-06-07 
 * 
 * Copyright 2019 Stefano Cudini 
 * stefano.cudini@gmail.com 
 * http://labs.easyblog.it/ 
 * 
 * Licensed under the MIT license. 
 * 
 * Demos: 
 * http://labs.easyblog.it/bootstrap-list-filter/ 
 * 
 * Source: 
 * git@github.com:stefanocudini/bootstrap-list-filter.git 
 * 
 */

!function(d){d.fn.btsListFilter=function(e,l){"use strict";var t,a,s,i,n,o=this,r=d(this),c=d(e),u=r;return l=d.extend({delay:300,minLength:1,initial:!0,casesensitive:!1,eventKey:"keyup",resetOnBlur:!0,sourceData:null,sourceTmpl:'<a class="list-group-item" href="#"><span>{title}</span></a>',sourceNode:function(e){return function(e,s){return e.replace(/\{ *([\w_]+) *\}/g,function(e,t){return s[t]||""})}(l.sourceTmpl,e)},emptyNode:function(e){return'<a class="list-group-item well" href="#"><span>No Results</span></a>'},cancelNode:function(){return'<span class="btn glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>'},maxResults:-1,maxResultsNode:function(e){return'<span class="list-groiup-item well">Too many results - keep typing to refine search</span>'},loadingClass:"bts-loading-list",itemClassTmp:"bts-dynamic-item",itemEl:".list-group-item",itemChild:null,itemFilter:function(e,t){t=t&&t.replace(new RegExp("[({[^.$*+?\\]})]","g"),"");var s=d(e).text(),i=l.initial?"^":"";return new RegExp(i+t,l.casesensitive?"":"i").test(s)},showEvent:"show.bs",hideEvent:"hide.bs"},l),o.reset=function(){c.val("").trigger(l.eventKey)},d.isFunction(l.cancelNode)&&(t=d(l.cancelNode.call(o)).hide(),c.after(t),c.parents(".form-group").addClass("has-feedback"),c.prev().is(".control-label")||t.css({top:0}),t.css({"pointer-events":"auto"}),t.on("click",o.reset)),c.on(l.eventKey,(s=function(e){var s=d(this).val();l.itemEl&&(u=r.find(l.itemEl)),l.itemChild&&(u=u.find(l.itemChild));var i=u.filter(function(){return l.itemFilter.call(o,this,s)}),n=u.not(i);l.itemChild&&(i=i.parents(l.itemEl),n=n.parents(l.itemEl).hide()),""!==s&&s.length>=l.minLength?(i.show(),n.hide(),t.show(),o.trigger(l.showEvent),"function"===d.type(l.sourceData)?(i.hide(),n.hide(),a&&(d.isFunction(a.abort)?a.abort():d.isFunction(a.stop)&&a.stop()),r.addClass(l.loadingClass),a=l.sourceData.call(o,s,function(e){if(a=null,i.hide(),n.hide(),r.find("."+l.itemClassTmp).remove(),e&&0!==e.length)if(l.maxResults<0||e.length<=l.maxResults)for(var t in e)d(l.sourceNode.call(o,e[t])).addClass(l.itemClassTmp).appendTo(r);else d(l.maxResultsNode(e)).addClass(l.itemClassTmp).appendTo(r);else d(l.emptyNode.call(o,s)).addClass(l.itemClassTmp).appendTo(r);r.removeClass(l.loadingClass)})):(r.find("."+l.itemClassTmp).remove(),0===i.length&&d(l.emptyNode.call(o,s)).addClass(l.itemClassTmp).appendTo(r))):(i.show(),n.show(),t.hide(),o.trigger(l.hideEvent),r.find("."+l.itemClassTmp).remove())},i=(i=l.delay)||300,function(){var e=this,t=arguments;clearTimeout(n),n=setTimeout(function(){s.apply(e,Array.prototype.slice.call(t))},i)})),l.resetOnBlur&&c.on("blur",function(e){o.reset()}),r}}(jQuery);